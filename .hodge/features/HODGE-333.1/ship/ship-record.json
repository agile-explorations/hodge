{
  "feature": "HODGE-333.1",
  "timestamp": "2025-10-07T01:36:18.640Z",
  "issueId": null,
  "pmTool": "linear",
  "validationPassed": true,
  "shipChecks": {
    "tests": true,
    "coverage": true,
    "docs": true,
    "changelog": true
  },
  "commitMessage": "feat: migrate review profiles from YAML to markdown with frontmatter (HODGE-333.1)\n\n## What Changed\n\n**New Infrastructure** (3 modules, 268 lines):\n- src/lib/frontmatter-parser.ts: YAML frontmatter parsing with validation (130 lines)\n- src/lib/markdown-utils.ts: Utility for counting markdown headings (30 lines)\n- src/lib/review-profile-loader.ts: Markdown-based profile loader (108 lines)\n\n**Profile Migration** (1 file deleted, 1 created):\n- Deleted .hodge/review-profiles/default.yml (105 lines)\n- Created .hodge/review-profiles/general-coding-standards.md (85 lines)\n- Removed redundant \"Lessons Learned\" and \"Pattern Adherence\" criteria (already loaded by ContextAggregator)\n- Consolidated to 6 universal coding criteria (SRP, DRY, Coupling, Complexity, Naming, Error Handling)\n\n**Dependencies** (package.json):\n- Added: gray-matter@4.0.3 (frontmatter parsing)\n- Net change: +1 production dependency\n\n**Test Coverage** (3 new files, 578 lines, 18 tests):\n- src/lib/frontmatter-parser.smoke.test.ts: 8 tests validating frontmatter parsing\n- src/lib/markdown-utils.smoke.test.ts: 5 tests for heading counter\n- src/lib/review-profile-loader.smoke.test.ts: 5 tests for profile loading\n- Updated src/commands/review.smoke.test.ts: Migrated 3 tests to markdown profiles\n- Updated src/commands/review.integration.test.ts: Migrated 2 integration tests\n\n**Command Updates** (1 file, 7 lines changed):\n- src/commands/review.ts: Switched from ProfileLoader to ReviewProfileLoader\n- Changed profile name from 'default' to 'general-coding-standards'\n- Updated output to use criteria_count instead of criteria.length\n\n## Why This Change\n\nThe review system used YAML profiles (default.yml) which created format inconsistency with the project's markdown-based standards, principles, patterns, and lessons. This migration establishes:\n\n1. **Unified Format**: All .hodge/ documentation now uses markdown + YAML frontmatter\n2. **Simplified Architecture**: AI reads raw markdown profiles directly (no complex parsing needed)\n3. **Cleaner Separation**: CLI extracts metadata only; AI consumes full markdown content\n4. **Foundation for Composition**: Frontmatter versioning and metadata enable future profile composition system (HODGE-333.4)\n\n**Key Architectural Decision**: Originally planned complex AST parsing (unified + remark), but pivoted to simple approach where:\n- Frontmatter parser extracts metadata (name, version, criteria count)\n- Markdown content passed directly to AI in review prompt\n- Eliminated 200+ lines of unnecessary parsing code and 2 dependencies\n\n## Impact\n\n✅ **Format Consistency**: All .hodge/ docs now use markdown (standards, principles, patterns, lessons, profiles)\n✅ **Simplified Codebase**: 268 lines of focused code vs. ~500 lines with AST parsing\n✅ **Maintained Backward Compatibility**: Review command works identically, all 849 tests passing\n✅ **Better Maintainability**: Clean abstractions, comprehensive error handling (8 validations)\n✅ **Future-Proof**: Frontmatter versioning (1.0.0) enables schema evolution\n✅ **Zero Breaking Changes**: Review workflow unchanged for users\n\nCloses HODGE-333.1"
}